---
layout: post
title: Using Proc Metadata to determine members of a group
date: '2015-02-04T08:36:00.001-08:00'
author: Allan Bowe
tags: 
modified_time: '2015-06-08T13:29:39.862-07:00'
blogger_id: tag:blogger.com,1999:blog-3488921339026456633.post-4783656877183406592
blogger_orig_url: http://www.rawsas.com/2015/02/using-proc-metadata-to-determine.html
---

The code should be fairly self explanatory..<br /><br /><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">options</span><span style="background: white; font-family: 'Courier New';"> </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">noquotelenmax</span><span style="background: white; font-family: 'Courier New';">;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><br /></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: green; font-family: &quot;Courier New&quot;;">/**<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: green; font-family: &quot;Courier New&quot;;">&nbsp;* Proc metadata call<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: green; font-family: &quot;Courier New&quot;;">&nbsp;* Flags 256:OMI_GETMETADATA, 128:OMI_XMLSELECT and 4:OMI_TEMPLATE<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: green; font-family: &quot;Courier New&quot;;">&nbsp;*/</span><span style="background: white; font-family: 'Courier New';"><o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">filename</span><span style="background: white; font-family: 'Courier New';"> tmp </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">temp</span><span style="background: white; font-family: 'Courier New';">;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><b><span style="background: white; color: navy; font-family: &quot;Courier New&quot;;">proc</span></b><span style="background: white; font-family: 'Courier New';"> </span><b><span style="background: white; color: navy; font-family: &quot;Courier New&quot;;">metadata</span></b><span style="background: white; font-family: 'Courier New';"> <o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; font-family: 'Courier New';">&nbsp;&nbsp; </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">IN</span><span style="background: white; font-family: 'Courier New';">=</span><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">'&lt;GetMetadataObjects&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Reposid&gt;$METAREPOSITORY&lt;/Reposid&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Type&gt;IdentityGroup&lt;/Type&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;NS&gt;SAS&lt;/NS&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Flags&gt;388&lt;/Flags&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Options&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Templates&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;IdentityGroup Name=""&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;MemberIdentities /&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/IdentityGroup&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Person Name="" DisplayName="" /&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Templates&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;XMLSelect search="@Name=''ETL Developers''"/&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Options&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/GetMetadataObjects&gt;'</span><span style="background: white; font-family: 'Courier New';"><o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; font-family: 'Courier New';">&nbsp;&nbsp; </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">out</span><span style="background: white; font-family: 'Courier New';">=tmp;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><b><span style="background: white; color: navy; font-family: &quot;Courier New&quot;;">run</span></b><span style="background: white; font-family: 'Courier New';">;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><br /></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: green; font-family: &quot;Courier New&quot;;">/* define XML Map */</span><span style="background: white; font-family: 'Courier New';"><o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">filename</span><span style="background: white; font-family: 'Courier New';"> tmp2 </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">temp</span><span style="background: white; font-family: 'Courier New';"> </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">lrecl</span><span style="background: white; font-family: 'Courier New';">=</span><b><span style="background: white; color: teal; font-family: &quot;Courier New&quot;;">3000</span></b><span style="background: white; font-family: 'Courier New';">;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><b><span style="background: white; color: navy; font-family: &quot;Courier New&quot;;">data</span></b><span style="background: white; font-family: 'Courier New';"> </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">_null_</span><span style="background: white; font-family: 'Courier New';">;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; font-family: 'Courier New';">&nbsp;&nbsp; </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">file</span><span style="background: white; font-family: 'Courier New';"> tmp2;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; font-family: 'Courier New';">&nbsp;&nbsp; </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">put</span><span style="background: white; font-family: 'Courier New';"> </span><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">'&lt;SXLEMAP version="1.2" name="Persons"&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;TABLE name="Persons"&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;TABLE-PATH syntax="XPath"&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Objects/IdentityGroup/MemberIdentities/Person<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/TABLE-PATH&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;COLUMN name="PersonName"&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;LENGTH&gt; 100 &lt;/LENGTH&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;PATH syntax="XPath"&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Objects/IdentityGroup/MemberIdentities/Person/@Name<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/PATH&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/COLUMN&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;COLUMN name="PersonDisplayName"&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;LENGTH&gt; 200 &lt;/LENGTH&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;PATH syntax="XPath"&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Objects/IdentityGroup/MemberIdentities/Person/@DisplayName<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/PATH&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/COLUMN&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><div class="changetip_tipme_button" data-bid="11a492c4-afd5-4c83-9bcc-d304573e1386" data-uid="5ea266567da74e6b814193ba026edff3"></div><script>(function(document,script,id){var js,r=document.getElementsByTagName(script)[0],protocol=/^http:/.test(document.location)?'http':'https';if(!document.getElementById(id)){js=document.createElement(script);js.id=id;js.src=protocol+'://widgets.changetip.com/public/js/widgets.js';r.parentNode.insertBefore(js,r)}}(document,'script','changetip_w_0'));</script><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/TABLE&gt;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: purple; font-family: &quot;Courier New&quot;;">&nbsp;&nbsp; &lt;/SXLEMAP&gt;'</span><span style="background: white; font-family: 'Courier New';">;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><b><span style="background: white; color: navy; font-family: &quot;Courier New&quot;;">run</span></b><span style="background: white; font-family: 'Courier New';">;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><br /></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: green; font-family: &quot;Courier New&quot;;">/* display results */</span><span style="background: white; font-family: 'Courier New';"><o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">libname</span><span style="background: white; font-family: 'Courier New';">&nbsp;&nbsp; tmp </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">xml</span><span style="background: white; font-family: 'Courier New';"> </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">xmlfileref</span><span style="background: white; font-family: 'Courier New';">=tmp&nbsp; </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">xmlmap</span><span style="background: white; font-family: 'Courier New';">=tmp2 </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">access</span><span style="background: white; font-family: 'Courier New';">=READONLY;<o:p></o:p></span></div><div class="MsoNormal" style="margin-bottom: 0.0001pt;"></div><div class="MsoNormal"><b><span style="background: white; color: navy; font-family: &quot;Courier New&quot;;">proc</span></b><span style="background: white; font-family: 'Courier New';"> </span><b><span style="background: white; color: navy; font-family: &quot;Courier New&quot;;">print</span></b><span style="background: white; font-family: 'Courier New';"> </span><span style="background: white; color: blue; font-family: &quot;Courier New&quot;;">data</span><span style="background: white; font-family: 'Courier New';">=tmp.persons;</span><b><span style="background: white; color: navy; font-family: &quot;Courier New&quot;;">run</span></b><span style="background: white; font-family: 'Courier New';">;</span><o:p></o:p></div> <div class="changetip_tipme_button" data-bid="11a492c4-afd5-4c83-9bcc-d304573e1386" data-uid="5ea266567da74e6b814193ba026edff3"></div><script>(function(document,script,id){var js,r=document.getElementsByTagName(script)[0],protocol=/^http:/.test(document.location)?'http':'https';if(!document.getElementById(id)){js=document.createElement(script);js.id=id;js.src=protocol+'://widgets.changetip.com/public/js/widgets.js';r.parentNode.insertBefore(js,r)}}(document,'script','changetip_w_0'));</script>